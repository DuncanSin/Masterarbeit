\chapter{Implementierung \& Optimierung}
\label{ch:opt}
\rm

In diesem Kapitel werden die Implementierung und die Optimierung des Referenz-Programm-Codes auf dem ARM Cortex A8 und dem C674x DSPs beschrieben.\\
Hierfür wir in \textbf{Abschnitt \ref{sec:str}} als erstes die Optimierungsstrategie vorgestellt nach der die Optimierungen in den folgenden Abschnitten durchgeführt werden. Anschließend werden in \textbf{Abschnitt \ref{sec:optarm}} die Implementierung und Optimierung des Referenz-Programm-Codes auf dem ARM Cortex A8 und in \textbf{Abschnitt \ref{sec:optdsp}} die auf dem C674x DSP vorgestellt.

\section{Optimierungsstrategie}\label{sec:str}
Das Ziel der in den folgenden Abschnitten vorgestellten Optimierungen ist die Verbesserung der Laufzeit des Musikklassifikator. Hierfür wird angestrebt, die von den Prozessoren zur Verfügung gestellten Rechenressourcen effizient auszunutzen.\\
Für die Berechnung dieser Effizienz sind mehrere Gütemaße vorhanden, unter anderem Werte für \textit{Instruktionen pro Takt} (engl. Instruction per Cycle oder kurz IPC), \textit{Takte pro Instruktion} (engl. Cycles per Instruktion oder kurz CPI), die Messung von \textit{Cache Hits und Misses} und die \textit{Laufzeit} des Programms. Auf Grund der von Texas Instrument zur Verfügung gestellten Werkzeuge ist eine Messung von IPC/CPI-Werten oder Cache Hits/Misses nicht ohne weiteres Möglich, so dass sich in dieser Arbeit auf die Messung der Laufzeit für die Bewertung der Effizienz beschränkt werden soll.\\
Als nächstes muss entschieden werden, wie Optimierungspotenziale identifiziert werden sollen. Die Herausforderung hierbei liegt darin, dass eine Vielzahl von Algorithmen vorhanden sind. Es wäre möglich diese nach einer zu wählenden Reihenfolge sukzessiv zu Optimieren. Dieses würde aber viel Zeit in Anspruch nehmen und es würde eventuell mehr Zeit in Optimierungen investiert die keinen großen Anteil an der Gesamtlaufzeit besitzen. Daher wird sich die Optimierung innerhalb dieser Arbeit auf die Optimierung von zeitkritischen Stellen beschränken. Hierfür wird als erstes der Schritt der Musikklassifikation identifiziert werden, der den größten Anteil an der Gesamtlaufzeit besitzt. Nach dieser Identifizierung wird die Optimierung innerhalb dieses Schritts ebenfalls auf jene Algorithmen beschränkt, die ihrerseits den größten Anteil an der Laufzeit dieser Phase besitzen. Auf diese Weise wird versucht mit der Optimierung von einzelnen Algorithmen große Verbesserungen an der Gesamtlaufzeit des Musikklassifikators zu erreichen.\\
Sowohl die Untersuchungen auf dem ARM Cortex A8, als auch die auf dem C674x DSP werden hierfür in drei Schritten durchgeführt:

\begin{enumerate}
\item Laufzeitanalyse des Programmteils zur Identifikation zeitkritischer Algorithmen oder Codesegmente
\item Optimierung der gefundenen Algorithmen oder Codesegmente
\item Bewertung der durchgeführten Optimierungen
\end{enumerate}

Hierbei handelt es sich um einen iterativen Prozess, das heißt, dass nach einer durchgeführten Optimierung eine weitere Laufzeitmessung durchgeführt wird. Dieses geschieht zum einen für die Bewertung einer durchgeführten Optimierung und zum anderen um eventuell neue zeitkritische Algorithmen zu identifizieren.
