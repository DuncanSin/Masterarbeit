\chapter{Grundlagen}
\label{ch:grund}
\rm

\section{Algorithmen}\label{sec:alg}
In diesem Kapitel sollen die Extraktionsalgorithmen vorgestellt werden, aus denen die im \textbf{Kapitel \ref{ch:optarm}} beschriebenen FeatureSets zusammengesetzt sind, die für die Laufzeitanalyse des Codes verwendet werden. Hierfür werden diese in zwei Bereiche unterteilt, einmal die Features, welche im Zeitbereich arbeiten (\textbf{\ref{subsec:zeit}}) und diese die im Frequenzbereich arbeiten (\textbf{\ref{subsec:freq}}). Diese Unterteilung wurde aus \cite{haller2008} übernommen.

\subsection{Notation von Ausdrücken und Variablen}\label{subsec:note}

Hier sollen kurz die verwendeten Ausdrücke und Variablen eingeführt werden, die für die spätere Definition der einzelnen Features benötig werden (\textbf{Tabelle \ref{tab:note}}), wie sie in  \cite{haller2008} und \cite{Theimer2008} definiert sind.

\begin{table*}[ht]
	\centering
		\begin{tabular}{p{6cm} | c}
			\textbf{Ausdruck} & \textbf{Formel}\\
			\hline
			\hline
			Anzahl der Zeitfenster im Musikstück & $L_{total}~=~\left\lceil \frac{N_{total}}{N} \right\rceil$ \\
			Anzahl der Frequenzwerte & $K$ \\
			Anzahl der Samples im Musikstück & $N_{total}$ \\
			Amplitude der Spektralkomponente & $A(k)~=~\left|X(k)\right|$ \\
			Amplitude der Spektralkomponente im Zeitfenster l & $A^{(l)},~l\in[1,L_{total}]$\\
			diskrete Spektralkomponente & $X(k)$ \\
			diskretes Zeitsignal & $x(n),\ n\in[0,N_{total}~-~1]$\\
			Frequenzwert & $k\in[0,~K]$ \\
			Länge eines Zeitfensters & $N$\\
			Samplingfrequenz in Hz & $f_{s}$
		\end{tabular}
	\caption{Tabelle der verwendeten Ausdrücke und Variablen}
	\label{tab:note}
\end{table*}


\subsection{Features des Zeitbreichs}\label{subsec:zeit}

\subsubsection{Root Mean Square (RMS)}\label{subsubsec:rms}
Root Mean Square oder auch das quadratische Mittel normiert die einzelnen Signalenergien innerhalb eines Zeitfensters (\textbf{Formel \ref{eqn:rms}}).\cite{haller2008}\cite{Theimer2008}

\begin{equation}
	\label{eqn:rms}
	x_{rms}~=~\sqrt{\frac{1}{N}\sum^{N-1}_{n=0}x^{2}(n)}
\end{equation}

\subsubsection{Low Energy}\label{subsubsec:le}

Low Energy fasst meherere aufeinander folgende Zeitfenster $n$ zu einem sogenannten Analysezeitraum zusammen und gibt die Rate der Zeitfenster an, deren RMS unter dem Mittel aller RMS im Analysezeitraum liegen (\textbf{Formel \ref{eqn:le}}). Hierfür sei $N_{a}$ die Anzahl der berachteten Zeitfenster im Analysezeitraum.\cite{haller2008}\cite{Theimer2008}

\begin{equation}
	\label{eqn:le}
	r_{low}~=~\frac{1}{N_{a}}\sum^{N_{a}-1}_{i=0}u(\mu_{rms}~-~x_{rms}(n))
\end{equation}
mit \[\mu_{rms}~=~\frac{1}{N_{a}}\sum^{N_{a}-1}_{i=0}x_{rms}(n)\] und \[u(x)~=~\left\{ \begin{array}{ll} 
1 & \textrm{für } x~>~0 \\
0 & \textrm{für } x~\leq~0\\
\end{array}\right.\]
 

\subsubsection{Zero Crossing Rate}\label{subsubsec:zcr}

Bei der Zero Crossing Rate werden die Auftreten von Vorzeichenwechseln innerhalb eines Zeitfensters berechnet. Diese Rate gibt ein Maß für den hochfrequenten Anteil des Signals an(\textbf{Formel \ref{eqn:zero}}).\cite{haller2008}\cite{Theimer2008}

\begin{equation}
	\label{eqn:zero}			   r_{zcr}~=~\frac{1}{2(N~-~1)}\sum^{N-2}_{n=0}\left|sgn~x(n~+~1)~-~sgn~x(n)\right|
\end{equation}



\subsection{Features des Frequenzbereichs}\label{subsec:freq}

\subsubsection{Fast Fouriertransformation (FFT)}\label{subsubsec:fft}

\subsubsection{Chroma Vektor}\label{subsubsec:cv}

Der Chroma Vektor fasst alle Spektralkomponenten einer Tonhöhe zusammen und fasst alle Frequenzen zu einer Oktave zusammen. Hierbei werden alle spektralen Amplituden des gleichen Halb- oder Vierteltons aufsummiert (\textbf{Formel \ref{eqn:cv}}).

\begin{equation}
	\label{eqn:cv}			   
	A_{chroma}\left(\widetilde{k}\right)~=~\sum_{k:~p(k)=\widetilde{k}} A(k)
\end{equation}

Z.B. für Vierteltöne gilt

\[p(k)~=~\left\lfloor 24~log_{2}\left(\frac{2k}{N}\frac{f_{s}}{f_{1}}\right) \right\rfloor~mod~24\textrm{ und }f_{1}~=~440~Hz \]

Für Halbtöne müsste 24 durch 12 ersetzt werden.\cite{haller2008}\cite{Theimer2008}

\subsubsection{Amplitude Of Maximum In Chromagram}\label{subsubsec:aomic}

Die maximale Amplitude des Chromagrams gibt den maximalen Chroma Vektor an und stellt daher die Stärke eines Tons in verschiedenen Oktavstufen dar (\textbf{Formel \ref{eqn:aomic}}).\cite{haller2008}\cite{Theimer2008}

\begin{equation}
	\label{eqn:aomic}			   
	A_{maxchroma}~=~\max_{\widetilde{k}}~A_{chroma}\left(\widetilde{k}\right)
\end{equation}

\subsubsection{Mel Frequency Cepstral Coefficients (MFCC)}\label{subsubsec:mfcc}

\subsubsection{Normalized Audio Spectrum Envelope}\label{subsubsec:nase}

\subsubsection{Octave Spectral Contrast}\label{subsubsec:osc}

\subsubsection{Spectral Centroid}\label{subsubsec:sc}

Der Spectral Centroid gibt den Schwerpunkt des Amplitudenspektrums des Signals an (\textbf{Formel \ref{eqn:sc}}).\cite{haller2008}\cite{Theimer2008}

\begin{equation}
	\label{eqn:sc}			   	S_{centroid}~=~\frac{\sum\limits^{\frac{K}{2}-1}_{k=0}k~A(k)}{\sum\limits^{\frac{K}{2}-1}_{k=0}A(k)} 
\end{equation}

\subsubsection{Spectral Crest Factor}\label{subsubsec:scf}

Der Spectral Crest Factor stellt ein Maß der spectralen Flachheit eines Frequenzbandes dar und ist im Wertebereich $\left[1,\infty\right]$ definiert. Hierbei bedeutet 1, dass alle spectral Ampilituden gleich sind und $\infty$ das garkeine Flachheit existiert (\textbf{Formel \ref{eqn:scf}}).\\
Dieser Factor wird auf folgenden Frequenzbändern berechnet:
\begin{itemize}
	\item 250 - 500 Hz ($k_{1l}$ - $K_{1u}$)
	\item 500 - 1000 Hz ($k_{2l}$ - $K_{2u}$)
	\item 1000 - 2000 Hz ($k_{3l}$ - $K_{3u}$)
	\item 2000 - 4000 Hz ($k_{4l}$ - $K_{4u}$)
\end{itemize}
\cite{Theimer2008}

\begin{equation}
	\label{eqn:scf}			   
	S_{crest}~=~frac{\max\limits_{k\in\left[k_{il},k_{iu}\right]}A(k)}{\frac{1}{k_{iu}~-~k_{il}~+~1}\sum\limits^{k_{iu}}_{k=k_{il}}A(k)}
\end{equation}

\subsubsection{Spectral Flux}\label{subsubsec:sf}

Der Spectral Flux ist definiert als die quadrierte Differenz zwischen den normalisierten Betragsspektren von zwei aufeinander folgenden Zeitfenstern (\textbf{Formel \ref{eqn:sf}}).\cite{haller2008}\cite{Theimer2008}

\begin{equation}
	\label{eqn:sf}			   
	S_{flux}~=~\frac{2}{K}\sum\limits^{\frac{K}{2}-1}_{k=0}\left( A^{(l)}(k)~-~A^{(l-1)}(k)\right)^2
\end{equation}


\subsubsection{Spectral Rolloff}\label{subsubsec:sr}

Als Spectral Rolloff bezeichnet man der Frequenzwert ($k_{rolloff}$) unter dem sich eine bestimmte Prozentzahl ($p_{rolloff}$) der Spektralwerte konzentrieren (\textbf{Formel \ref{eqn:sr}}). \cite{haller2008}\cite{Tza2002}

\begin{equation}
	\label{eqn:sr}			   
	\sum^{k_{rolloff}}_{k=0}A(k)~=~p_{rolloff}~\cdot~\sum^{\frac{K}{2}-1}_{k=0}A(k)
\end{equation}

\subsubsection{Sub-Band Energy Ratio}\label{subsubsec:sber}

Die Sub-Band Energy Ratio gibt die Verteilung der Spektralenergy auf die Frequenzintervalle $\left[0,\frac{f_s}{16}\right)$,$\left[\frac{f_s}{16},\frac{f_s}{8}\right)$,$\left[\frac{f_s}{8},\frac{f_s}{4}\right)$ und $\left[\frac{f_s}{4},\frac{f_s}{2}\right)$ an und kann in Indexbereiche $\left[0,\frac{K}{16}\right)$,$\left[\frac{K}{16},\frac{K}{8}\right)$,$\left[\frac{K}{8},\frac{K}{4}\right)$ und $\left[\frac{K}{4},\frac{K}{2}\right)$ überführt werden (\textbf{Formel \ref{eqn:sber}}).\cite{Theimer2008}

\begin{equation}
	\label{eqn:sber}			   
	S_1~=~\frac{\sum\limits^{\frac{K}{16}-1}_{k=0}A^2(k)}{\sum\limits^{\frac{K}{2}-1}_{k=0}A^2(k)},~S_2~=~\frac{\sum\limits^{\frac{K}{8}-1}_{k=\frac{K}{16}}A^2(k)}{\sum\limits^{\frac{K}{2}-1}_{k=0}A^2(k)},S_3~=~\frac{\sum\limits^{\frac{K}{0}-1}_{k=\frac{K}{8}}A^2(k)}{\sum\limits^{\frac{K}{2}-1}_{k=0}A^2(k)},S_1~=~\frac{\sum\limits^{\frac{K}{2}-1}_{k=\frac{K}{4}}A^2(k)}{\sum\limits^{\frac{K}{2}-1}_{k=0}A^2(k)}
\end{equation}


\section{Profiling}\label{sec:prof}
Der Begriff Profiling bescheibt Methoden, mit denen das Verhalten von Applikationen auf Systemebene analysiert werden können, hierzu zählen Analysen der Laufzeit, der Schreib- und Lesezugriffe und auch die Verhältnisse von Instuktionen und Takten zueinander. Im Folgenden werden nun Beispielhaft die Profilingmethoden der Laufzeitmessung, der richtigen Vorhersagen des Vorladens in den Cache (sog. Cache Hits), sowie die Betrachtungen des Verhältnisses von Takt und Instuktionen (Instructions per Cycle (IPC) und Cycle per Instruction (CPI)).

\subsection{Laufzeitanalyse}\label{subsec:time}

\subsection{Cache Hits}\label{subsec:cache}

\subsection{IPC und CPI}\label{subsec:ipccpi}

